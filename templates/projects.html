{% extends "base.html" %}

{% block title %}Projects - Horizon{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='horizon-styles.css') }}">

<style>
    /* --- CRITICAL FIXES --- */

    /* 1. Force the page wrapper to stop acting like a container for fixed elements */
    .page-wrapper {
        transform: none !important;
        filter: none !important;
        perspective: none !important;
        contain: none !important;
        /* Reset layout for full screen */
        max-width: 100vw !important;
        width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
        background: transparent !important;
        overflow: visible !important;
    }

    /* 2. Lock the Canvas to the Viewport (The "Scrolls with you" fix) */
    #heroCanvas {
        position: fixed !important;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: 0; /* Sit above the background, below text */
        pointer-events: none; /* Click-through */
        display: block;
    }

    /* 3. Hide the Base Template's Wave Animation */
    #wave-background-container {
        display: none !important;
    }

    /* 4. Ensure Text/Content sits ON TOP of the canvas */
    .hero-content, .side-menu, .scroll-progress, .scroll-sections {
        position: relative;
        z-index: 10; /* Higher than canvas (0) */
    }

    /* 5. Projects Section Background */
    /* This ensures that when you scroll to projects, you can still read the text */
    .projects-listing-section {
        position: relative;
        z-index: 20;
        background: linear-gradient(to bottom, transparent, #000 15%);
        margin-top: -5px; /* Seal any gap */
    }

    /* 6. Fix Navigation Bar Visibility */
    header {
        position: fixed;
        width: 100%;
        top: 0;
        z-index: 1000;
        background: rgba(0,0,0,0.5); /* Semi-transparent */
        backdrop-filter: blur(5px);
    }

    /* Force links to be white so they are visible against stars */
    header a { color: white !important; }
</style>
{% endblock %}

{% block content %}
<div class="hero-container cosmos-style">
    <canvas id="heroCanvas" class="hero-canvas"></canvas>

    <div id="sideMenu" class="side-menu">
        <div class="menu-icon">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="vertical-text">SPACE</div>
    </div>

    <div class="hero-content cosmos-content">
        <h1 id="heroTitle" class="hero-title">HORIZON</h1>

        <div id="heroSubtitle" class="hero-subtitle cosmos-subtitle">
            <p class="subtitle-line">Where vision meets reality,</p>
            <p class="subtitle-line">we shape the future of tomorrow</p>
        </div>
    </div>

    <div id="scrollProgress" class="scroll-progress">
        <div class="scroll-text">SCROLL</div>
        <div class="progress-track">
            <div class="progress-fill"></div>
        </div>
        <div class="section-counter">
            <span id="currentSection">00</span> / <span id="totalSections">02</span>
        </div>
    </div>

    <div class="scroll-sections">
        <section class="content-section">
            <h1 class="hero-title">COSMOS</h1>
            <div class="hero-subtitle cosmos-subtitle">
                <p class="subtitle-line">Beyond the boundaries of imagination,</p>
                <p class="subtitle-line">lies the universe of possibilities</p>
            </div>
        </section>

        <section class="content-section">
            <h1 class="hero-title">INFINITY</h1>
            <div class="hero-subtitle cosmos-subtitle">
                <p class="subtitle-line">In the space between thought and creation,</p>
                <p class="subtitle-line">we find the essence of true innovation</p>
            </div>
        </section>
    </div>
</div>

<div class="projects-listing-section">
    <div class="projects-container">
        <h2 class="projects-heading">Our Projects</h2>
        <p class="projects-subheading">Exploring the frontiers of technology and innovation</p>

        <div class="projects-grid">
            <div class="project-card">
                <div class="project-image-wrapper">
                    <img src="{{ url_for('static', filename='project1.jpg') }}" alt="Project 1" class="project-image">
                    <div class="project-overlay"><span class="project-category">AI</span></div>
                </div>
                <div class="project-content">
                    <h3 class="project-title">Quantum Initiative</h3>
                    <p class="project-description">Developing next-generation algorithms.</p>
                </div>
            </div>

            <div class="project-card">
                <div class="project-image-wrapper">
                    <img src="{{ url_for('static', filename='project2.jpg') }}" alt="Project 2" class="project-image">
                    <div class="project-overlay"><span class="project-category">Space</span></div>
                </div>
                <div class="project-content">
                    <h3 class="project-title">Telescope Array</h3>
                    <p class="project-description">Distributed network for deep space exploration.</p>
                </div>
            </div>

            <div class="project-card">
                <div class="project-image-wrapper">
                    <img src="{{ url_for('static', filename='project3.jpg') }}" alt="Project 3" class="project-image">
                    <div class="project-overlay"><span class="project-category">Biotech</span></div>
                </div>
                <div class="project-content">
                    <h3 class="project-title">Neural Interface</h3>
                    <p class="project-description">Brain-computer interface technology.</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
<script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
<script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/ShaderPass.js"></script>
<script src="https://unpkg.com/three@0.128.0/examples/js/shaders/CopyShader.js"></script>
<script src="https://unpkg.com/three@0.128.0/examples/js/shaders/LuminosityHighPassShader.js"></script>
<script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

<script src="{{ url_for('static', filename='horizon-animation.js') }}"></script>
{% endblock %}